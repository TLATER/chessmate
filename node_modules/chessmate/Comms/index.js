// The 'glue' file. Holds all communications together
var Bus = require('systemBus');
var parseCommand = require('commands');

// Matches any command
var commandRegex = /\/.*/;

function server() {
}

// Returns an object containing a message to be displayed to the client and
// [optionally] a command to be executed on the client.
server.prototype.receive = function(message) {
    var components = message.split(' ');
    if (commandRegex.test(components[0])) {
        var instruction = parseCommand(components[0], components);
        return instruction;
    }
    else
        return { message: components[0] };
};

server.prototype.test = function(message) {
    var components = message.split(' ');
    return commandRegex.test(components[0]);
};
module.exports = server;