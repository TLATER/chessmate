var test = require('./');
var board = require('../board');
var pieceClass = require('../pieces');

function testPiece() {
        var pieces = new pieceClass();
        this.board = new board(pieces);
        console.log(pieces.getKingBlack());
        this.observer = new test(this.board, pieces);

        var data = ['B2', 'B3'];

        var square =
	        this.board.getGridSquare(translate(data[0])[0], data[0][1]);

        var returnVal = this.observer.move(square,
                                           translate(data[1])[0],
                                           data[1][1]);

        console.log('Moving a ' + square.getPieceName() + ' from '
                    + data.join(' to ') + ' returns ' + returnVal);
}

function translate(cellString) {
        var map = {
                    'A': '1',
                    'B': '2',
                    'C': '3',
                    'D': '4',
                    'E': '5',
                    'F': '6',
                    'G': '7',
                    'H': '8'
                };

        cellString = cellString.replace(/^[A-H]/, function(char) { return map[char] });
        return cellString;
}

testPiece();