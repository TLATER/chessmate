function checkMate(color,observer){
    if(color == 1)
        var square = observer.pieces.getKingBlack().square();
    else
        var square = observer.pieces.getKingWhite().square();

    return kingsArea(square,color,observer);
}

function kingsArea(square,color,observer)
{
    var file = conv(square.file());
    var rank = square.rank();

    for(var i = -1; i <= 1; ++i)
      for(var j = -1; i<= 1; ++j) {

        if( i !=0 && j != 0 ){
          if(color == 1){
            if (file + i > 0 && file + i < 9 && rank + j > 0 && rank + j <9)
              if(observer.board.getSquare(file+i,rank+j).getWhiteAggressors() == 0)
                return false;
            if (file + i > 0 && file + i < 9 && rank + j > 0 && rank + j <9)
              if( observer.board.getSquare(file +i, rank+i).getPiece() == ' ')
                return false;
          }
          else{
            if (file + i > 0 && file + i < 9 && rank + j > 0 && rank + j <9)
              if(observer.board.getSquare(file+i,rank+j).getBlackAggressors() == 0)
                return false;
            if (file + i > 0 && file + i < 9 && rank + j > 0 && rank + j <9)
              if( observer.board.getSquare(file +i, rank+j).getPiece() == ' ')
                return false;
          }

      } }
      
    console.log(observer.board.getSquare(6,2).getWhiteAggressors);
     return true;

}

function conv(file) {
    switch(file) {
        case 'a': return 1;
        case 'b': return 2;
        case 'c': return 3;
        case 'd': return 4;
        case 'e': return 5;
        case 'f': return 6;
        case 'g': return 7;
        case 'h': return 8;
        case  1 : return 'a';
        case  2 : return 'b';
        case  3 : return 'c';
        case  4 : return 'd';
        case  5 : return 'e';
        case  6 : return 'f';
        case  7 : return 'g';
        case  8 : return 'h';
        default : return 0;
    }
}

module.exports = checkMate;