var bus = require('systemBus');

// Returns an object containing a message and possibly executes a command
function parseCommand(command, args) {
    switch(command) {
        case '/help':
            return { message: 'Not much here yet.<br>'
                            + 'Use "/move A1 A2" to move a piece' };

        // move is caught by the Engine and then processed
        case '/move':
            var re = /[A-H][1-8]/;
            //If any input is not just one number, return null
            if (!re.test(args[1]) || !re.test(args[2])) {
                return { message: 'Illegal move ' + args[1] + '-' + args[2] };
            }
            bus.emit('move', [args[1], args[2]]);
            return { message: 'Moved ' + args[1] + '-' + args[2] };

        /* Allows clearing the board for test purposes */
        case '/clear':
            bus.emit('clear');
            break;

        default:
            return { message: "Unknown command '" + command + "'<br>"
                              + "Type /help for a list of commands" };
    }
}

module.exports = parseCommand;