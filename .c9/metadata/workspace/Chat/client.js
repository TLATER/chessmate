{"changed":true,"filter":false,"title":"client.js","tooltip":"/Chat/client.js","value":"window.onload = function(){\n\tvar getNode = function(s){\n\t\treturn document.querySelector(s);\n\t};\n\n\t var textArea = getNode('.chat-textarea');\n\t var status = getNode('.chat-status span');\n\t var messages = getNode('.chat-messages');\n\t var chatName = getNode('.chat-name');\n\t \n\t var defaultStatus = status.textContent;\n\t console.log(defaultStatus);\n\t \n\t var setStatus = function(s){\n\t \tstatus.textContent = s;\n\t \tif(s !== defaultStatus)\n\t \t{\n\t \t\tvar delay = setTimeout(function(){\n\t \t\tsetStatus(defaultStatus);\n\t \t\tclearInterval(delay);\n\t \t\t}, 3000);\n\t \t}\n\t };\n\t\n\ttry{\n\t\tvar socket = io.connect('http://127.0.0.1:2000');\n\t}\n\tcatch(e){}\n\n\tif(socket !== undefined){\n\t\tsocket.on('output', function(receivedData){\n\t\t\tif(receivedData.length){\n\t\t\t\tfor(var i = 0; i < receivedData.length; ++i){\n\t\t\t\t\tvar message = document.createElement('div');\n\t\t\t\t\tmessage.setAttribute('class', 'chat-message');\n\t\t\t\t\tmessage.textContent = receivedData[i].name + \": \" + receivedData[i].message; \n\t\t\t\t\tmessages.appendChild(message);\n\t\t\t\t\tmessages.insertBefore(message, messages.firstChild);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tsocket.on('status', function(receivedData){\n\t\t\tsetStatus((typeof receivedData === 'object') ? receivedData.message : receivedData);\n\n\t\t\tif(receivedData.clear === true)\n\t\t\t\ttextArea.value = \"\";\n\t\t});\n\n\t\ttextArea.addEventListener('keydown', function(event){\n\t\t\tvar userName = chatName.value;\n\t\t\tif(event.which === 13 && event.shiftKey === false){\n\t\t\t\tsocket.emit('input',{\n\t\t\t\t\tname : userName,\n\t\t\t\t\tmessage : this.value\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n}","undoManager":{"mark":0,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":60,"column":1},"action":"insert","lines":["window.onload = function(){","\tvar getNode = function(s){","\t\treturn document.querySelector(s);","\t};","","\t var textArea = getNode('.chat-textarea');","\t var status = getNode('.chat-status span');","\t var messages = getNode('.chat-messages');","\t var chatName = getNode('.chat-name');","\t ","\t var defaultStatus = status.textContent;","\t console.log(defaultStatus);","\t ","\t var setStatus = function(s){","\t \tstatus.textContent = s;","\t \tif(s !== defaultStatus)","\t \t{","\t \t\tvar delay = setTimeout(function(){","\t \t\tsetStatus(defaultStatus);","\t \t\tclearInterval(delay);","\t \t\t}, 3000);","\t \t}","\t };","\t","\ttry{","\t\tvar socket = io.connect('http://127.0.0.1:2000');","\t}","\tcatch(e){}","","\tif(socket !== undefined){","\t\tsocket.on('output', function(receivedData){","\t\t\tif(receivedData.length){","\t\t\t\tfor(var i = 0; i < receivedData.length; ++i){","\t\t\t\t\tvar message = document.createElement('div');","\t\t\t\t\tmessage.setAttribute('class', 'chat-message');","\t\t\t\t\tmessage.textContent = receivedData[i].name + \": \" + receivedData[i].message; ","\t\t\t\t\tmessages.appendChild(message);","\t\t\t\t\tmessages.insertBefore(message, messages.firstChild);","\t\t\t\t}","\t\t\t}","\t\t});","","\t\tsocket.on('status', function(receivedData){","\t\t\tsetStatus((typeof receivedData === 'object') ? receivedData.message : receivedData);","","\t\t\tif(receivedData.clear === true)","\t\t\t\ttextArea.value = \"\";","\t\t});","","\t\ttextArea.addEventListener('keydown', function(event){","\t\t\tvar userName = chatName.value;","\t\t\tif(event.which === 13 && event.shiftKey === false){","\t\t\t\tsocket.emit('input',{","\t\t\t\t\tname : userName,","\t\t\t\t\tmessage : this.value","\t\t\t\t});","\t\t\tevent.preventDefault();","\t\t\t}","\t\t});","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":25},"end":{"row":55,"column":0},"action":"insert","lines":["",""]},{"start":{"row":55,"column":0},"end":{"row":55,"column":5},"action":"insert","lines":["\t\t\t\t\t"]}]}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":35,"column":31},"end":{"row":35,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1424088309000}